<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:pt="http://java.sun.com/jsf/passthrough"
	  xmlns:c="http://java.sun.com/jstl/core" class="gt-ie8 gt-ie9 not-ie">
      
<h:body>
    <ui:composition template="template/padrao.xhtml">

        <ui:define name="conteudo">
            <h:form>
                <p:panel style="min-height: 1000px; min-width: 270px;">                	
	               
	                <h:panelGrid columns="2">		                
	                	<h:outputText style="font-weight: bold; color: red;" value="Olá #{sessionScope['usuarioLogado'].nomeCompleto.split(' ')[0]}"/><font style="font-weight: bold;">, seja bem vindo ao sistema de gerenciamento de chamados.</font> 
	             	</h:panelGrid>	
	             	
	             	<p:spacer height="15"/>
	             	
	             	<p:panel toggleable="true">	
	             	
	             		<f:facet name="header">	   
	             			
	             			<h:outputText value="HOJE (" style="font-weight: bold; color: navy;" />
		             		<h:outputText value="#{inicioControl.hoje.time}" converter="data" style="font-weight: bold; color: red;" />
		             		<h:outputText value="), " style="font-weight: bold; color: navy;" />
	             		          		
	             			<h:outputText style="font-weight: bold; color: navy;" 
		                				  rendered="#{inicioControl.listaAtendimentosHoje.size() > 0}"
		                				  value=" foram realizados #{inicioControl.listaAtendimentosHoje.size()} atendimentos de #{inicioControl.listaChamadosHoje.size()} chamados."/>
	                				  
	                		<h:outputText style="font-weight: bold; color: navy;" 
		                				  rendered="#{inicioControl.listaAtendimentosHoje.size() == 0}"
		                				  value="Hoje não foram realizados atendimentos."/>
	             		</f:facet>	     		
	             		
	             		<p:dataTable value="#{inicioControl.listaAtendimentosHoje}" id="tabelaAtendimentosHoje"									
									 paginator="true" style="min-width: 760px; margin-top: 10px;" 			 			  
		                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
		                             currentPageReportTemplate="Exibindo de {startRecord} a {endRecord} de {totalRecords} - Página: {currentPage}/{totalPages}"
		                             emptyMessage="Nenhum registro a ser exibido" rowIndexVar="rowIndex" reflow="true" var="item" rows="10" 	                             
		                             rowsPerPageTemplate="10,20,30,40,50" 
		                             selectionMode="multiple" rowKey="#{item.id}">	
		                             
		                             
		                    <p:column sortBy="#{item.chamado.nrChamado}" style="text-align: center; width: 80px;font-size: 11px;">
								<f:facet name="header">
									<h:outputText value="Chamado" />
								</f:facet>
								<h:outputText value="#{item.chamado.nrChamado}" />
							</p:column>							
							
							<p:column style="text-align: center; width: 90px;font-size: 11px;">
								<f:facet name="header">
									<h:outputText value="Atendimento" />
								</f:facet>
								<h:outputText value="#{item.nrSq}" />
							</p:column>
							
							<p:column sortBy="#{item.dhRespostaCliente}" style="text-align: center; width: 180px;font-size: 11px;">
								<f:facet name="header">
									<h:outputText value="Retorno para o cliente em:" />
								</f:facet>
								<h:outputText value="#{item.dhRespostaCliente}" converter="data"/>
								<h:outputText value=" "/>
								<h:outputText value="#{item.dhRespostaCliente}" converter="hora"/>
							</p:column>					
																					
							<p:column sortBy="#{item.nomeAnalista}" style="width: 220px; font-size: 11px;">							
								<f:facet name="header">
									<h:outputText value="Analista" />
								</f:facet>
								<h:outputText value="#{item.nomeAnalista.toUpperCase()}"/>								
							</p:column>	
							
							<p:column sortBy="#{item.chamado.sistemaModulo}" style="font-size: 11px; width: 200px;">
								<f:facet name="header">
									<h:outputText value="Sistema/Módulo" />
								</f:facet>
								<h:outputText value="#{item.chamado.sistemaModulo} "/>														
							</p:column>	
							
							<p:column sortBy="#{item.chamado.ambiente}" style="font-size: 11px; width: 120px; text-align: center;">
								<f:facet name="header">
									<h:outputText value="Ambiente" />
								</f:facet>
								<h:outputText value="#{item.chamado.ambiente} "/>														
							</p:column>		
		                             
		                </p:dataTable>	             		
	             		
	             	</p:panel>	             	
	             		
	             	<p:spacer height="15"/>	
	             		             	
	             	<p:panel toggleable="true">	
	             	
            			<f:facet name="header">
            			
            				<h:outputText value="Em " style="font-weight: bold; color: green;" />
		             		<h:outputText value="#{inicioControl.ontem.time}" converter="data" style="font-weight: bold; color: red;" />
		             		<h:outputText value=", " style="font-weight: bold; color: green;" />
            			
							<h:outputText style="font-weight: bold; color: green;" 
		                				  rendered="#{inicioControl.listaAtendimentosOntem.size() > 0}"
		                				  value=" foram realizados #{inicioControl.listaAtendimentosOntem.size()} atendimentos de #{inicioControl.listaChamadosOntem.size()} chamados."/>
	                				  
	                		<h:outputText style="font-weight: bold; color: green;" 
		                				  rendered="#{inicioControl.listaAtendimentosOntem.size() == 0}"
		                				  value="Não foram realizados atendimentos em "/>
		                	<h:outputText value="#{inicioControl.ontem.time}" converter="data" 
		                	 			  rendered="#{inicioControl.listaAtendimentosOntem.size() == 0}"
		                				  style="font-weight: bold; color: red;" />
						</f:facet>	                		             		
	             		
	             		<p:dataTable value="#{inicioControl.listaAtendimentosOntem}" id="tabelaAtendimentosOntem"									
									 paginator="true" style="min-width: 760px; margin-top: 10px;" 			 			  
		                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
		                             currentPageReportTemplate="Exibindo de {startRecord} a {endRecord} de {totalRecords} - Página: {currentPage}/{totalPages}"
		                             emptyMessage="Nenhum registro a ser exibido" rowIndexVar="rowIndex" reflow="true" var="item" rows="10" 	                             
		                             rowsPerPageTemplate="10,20,30,40,50" 
		                             selectionMode="multiple" rowKey="#{item.id}">
		                             
                		    <p:column sortBy="#{item.chamado.nrChamado}" style="text-align: center; width: 80px;font-size: 11px;">
								<f:facet name="header">
									<h:outputText value="Chamado" />
								</f:facet>
								<h:outputText value="#{item.chamado.nrChamado}" />
							</p:column>							
							
							<p:column style="text-align: center; width: 90px;font-size: 11px;">
								<f:facet name="header">
									<h:outputText value="Atendimento" />
								</f:facet>
								<h:outputText value="#{item.nrSq}" />
							</p:column>
							
							<p:column sortBy="#{item.dhRespostaCliente}" style="text-align: center; width: 180px;font-size: 11px;">
								<f:facet name="header">
									<h:outputText value="Retorno para o cliente em:" />
								</f:facet>
								<h:outputText value="#{item.dhRespostaCliente}" converter="data"/>
								<h:outputText value=" "/>
								<h:outputText value="#{item.dhRespostaCliente}" converter="hora"/>
							</p:column>					
																					
							<p:column sortBy="#{item.nomeAnalista}" style="width: 220px; font-size: 11px;">							
								<f:facet name="header">
									<h:outputText value="Analista" />
								</f:facet>
								<h:outputText value="#{item.nomeAnalista.toUpperCase()}"/>								
							</p:column>	
							
							<p:column sortBy="#{item.chamado.sistemaModulo}" style="font-size: 11px; width: 200px;">
								<f:facet name="header">
									<h:outputText value="Sistema/Módulo" />
								</f:facet>
								<h:outputText value="#{item.chamado.sistemaModulo} "/>														
							</p:column>	
							
							<p:column sortBy="#{item.chamado.ambiente}" style="font-size: 11px; width: 120px; text-align: center;">
								<f:facet name="header">
									<h:outputText value="Ambiente" />
								</f:facet>
								<h:outputText value="#{item.chamado.ambiente} "/>														
							</p:column>
		                             
		                </p:dataTable>	             		
	             		
	             	</p:panel>    
	             	              
                </p:panel>
            </h:form>
        </ui:define>

    </ui:composition>
</h:body>

</html>